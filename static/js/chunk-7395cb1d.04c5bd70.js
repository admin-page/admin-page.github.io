(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7395cb1d"],{"64a1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-synthesizer"},[a("Hints",[a("template",{slot:"hintName"},[e._v("图片合成")]),a("template",{slot:"hintInfo"},[a("p",[e._v("基于VueDRR拖拽功能，在其上通过叠加图片、文字等，实现图片的叠加伪合成功能")]),a("p",[e._v("VueDRR：基于vue-draggable-resizable的vue组件，可以实现拖动、拉伸和旋转功能")])])],2),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("合成区域")]),a("div",{staticClass:"box-wrapper"},[a("div",{staticClass:"drag-container",style:e.containerStyle},e._l(e.elements,(function(t,i){return a("ElementDrr",{key:i,style:e.elementZIndex(t.type),attrs:{element:t,handles:e.dragHandles(t.type)},on:{updateActiveEle:e.updateActiveEle}},["image"===t.type?a("img",{attrs:{src:t.src,draggable:"false"}}):e._e(),"text"===t.type?a("ImageRichText",{attrs:{element:t,"active-ele-text":e.activeEleText},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"item.text"}}):e._e()],1)})),1)])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("设置区域")]),a("div",{staticClass:"box-content"},[a("el-form",{staticClass:"form-wrapper",attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"选择底图"}},[a("UploadImage",{attrs:{"btn-name":"选择底图"},on:{"on-success":e.handleSuccess}})],1),a("el-form-item",{attrs:{label:"添加文本"}},[a("el-button",{on:{click:e.addText}},[e._v("添加文本")])],1),a("el-form-item",{attrs:{label:"添加图片"}},[a("UploadImage",{on:{"on-success":e.handleAddImage}})],1),a("el-form-item",{attrs:{label:"删除元素"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.deleteActiveEle}},[e._v("删除元素")])],1)],1),"text"===e.activeEle.type?a("TextSetting",{attrs:{"active-ele-text":e.activeEleText}}):e._e()],1)])],1)],1)],1)},n=[],s=(a("dbb3"),a("e35a"),a("5e9f"),a("b522")),r=a("272e"),l=a("4e87"),c=a("892b"),h=a("6b45"),o=a("ed08"),d={name:"ImageSynthesizer",components:{Hints:s["a"],ElementDrr:r["a"],ImageRichText:l["a"],TextSetting:c["a"],UploadImage:h["a"]},data:function(){return{container:{width:0,height:0,bgImageSrc:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img01.jpg"},elements:[],activeEle:{},eleNum:0}},computed:{containerStyle:function(){return{width:this.container.width+"px",height:this.container.height+"px",backgroundImage:"url('"+this.container.bgImageSrc+"')"}},activeEleText:function(){if("text"===this.activeEle.type)return this.activeEle}},created:function(){this.getDragContainerSize(1920,1200),this.addText(),this.addImage({active:!1,src:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img05.jpeg",size:53248,width:132,height:132})},methods:{dragHandles:function(e){if("text"===e)return["e","w"]},elementZIndex:function(e){var t=1;switch(e){case"text":t=3;break;case"image":t=2;break}return{zIndex:t}},handleSuccess:function(e){var t=this;this.container.bgImageSrc=e;var a=new Image;a.src=e,a.onload=function(){t.getDragContainerSize(a.width,a.height)}},getDragContainerSize:function(e,t){var a=850,i=550,n=Object(o["b"])(e,t,a,i);this.container.width=n.width,this.container.height=n.height},addText:function(){var e=++this.eleNum,t={active:!0,text:"请输入文本",type:"text",tag:"text_"+e,x:300,y:100,w:180,h:36,style:{textAlign:"left",lineHeight:"24px",fontSize:"24px",fontFamily:"微软黑体",fontWeight:400,color:"#f70707",backgroundColor:"#05f8e8",overflow:"hidden"}};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(t),this.updateActiveEle(t))},addImage:function(e){var t=++this.eleNum,a={active:e.active,type:"image",tag:"image_"+t,x:320,y:300,w:parseInt(e.width),h:parseInt(e.height),src:e.src,size:e.size};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(a),e.active&&this.updateActiveEle(a))},handleAddImage:function(e){var t=this,a=e.replace("data:image/jpeg;base64,","").length,i=parseInt(a-a/8*2),n=new Image;n.src=e,n.onload=function(){var a=Object(o["b"])(n.width,n.height,parseInt(t.container.width/4),parseInt(t.container.height/4));t.addImage({active:!0,src:e,size:i,width:a.width,height:a.height})}},updateActiveEle:function(e){this.activeEle=e},deleteActiveEle:function(){var e=this,t=this.elements.filter((function(t){return t.tag!==e.activeEle.tag}));this.$nextTick((function(){e.elements=t})),this.updateActiveEle({})}}},g=d,m=(a("d5ff"),a("9ca4")),u=Object(m["a"])(g,i,n,!1,null,null,null);t["default"]=u.exports},"751f":function(e,t,a){},d5ff:function(e,t,a){"use strict";var i=a("751f"),n=a.n(i);n.a}}]);