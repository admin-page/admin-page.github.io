(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-067eb16a"],{b240:function(e,t,a){},ea87:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-mark-wrapper"},[a("Hints",[a("template",{slot:"hintName"},[e._v("视频水印")]),a("template",{slot:"hintInfo"},[a("p",[e._v("基于VueDRR拖拽功能，在视频上通过叠加图片、文字等，实现视频添加水印的功能")]),a("p",[e._v("VueDRR：基于vue-draggable-resizable的vue组件，可以实现拖动、拉伸和旋转功能")])])],2),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("合成区域")]),a("div",{staticClass:"box-wrapper"},[a("div",{staticClass:"drag-container"},[a("video",{attrs:{src:e.videoSrc,controls:""}}),e._l(e.elements,(function(t,i){return a("ElementDrr",{key:i,style:e.elementZIndex(t.type),attrs:{element:t,handles:e.dragHandles(t.type)},on:{updateActiveEle:e.updateActiveEle}},["image"===t.type?a("img",{attrs:{src:t.src,draggable:"false"}}):e._e(),"text"===t.type?a("ImageRichText",{attrs:{element:t,"active-ele-text":e.activeEleText},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"item.text"}}):e._e()],1)}))],2)])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("设置区域")]),a("div",{staticClass:"box-content"},[a("el-form",{staticClass:"form-wrapper",attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"添加文本"}},[a("el-button",{on:{click:e.addText}},[e._v("添加文本")])],1),a("el-form-item",{attrs:{label:"添加图片"}},[a("UploadImage",{on:{"on-success":e.handleAddImage}})],1),a("el-form-item",{attrs:{label:"删除元素"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.deleteActiveEle}},[e._v("删除元素")])],1)],1),"text"===e.activeEle.type?a("TextSetting",{attrs:{"active-ele-text":e.activeEleText}}):e._e()],1)])],1)],1)],1)},s=[],n=(a("dbb3"),a("e35a"),a("5e9f"),a("b522")),l=a("272e"),r=a("4e87"),c=a("892b"),d=a("6b45"),o=a("ed08"),h={name:"VideoMark",components:{Hints:n["a"],ElementDrr:l["a"],ImageRichText:r["a"],TextSetting:c["a"],UploadImage:d["a"]},data:function(){return{videoSrc:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/videos/houlang.mp4",elements:[],activeEle:{},eleNum:0}},computed:{activeEleText:function(){if("text"===this.activeEle.type)return this.activeEle}},created:function(){this.addText(),this.addImage({active:!1,src:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img06.jpg",size:53248,width:132,height:132})},methods:{dragHandles:function(e){if("text"===e)return["e","w"]},elementZIndex:function(e){var t=1;switch(e){case"text":t=3;break;case"image":t=2;break}return{zIndex:t}},addText:function(){var e=++this.eleNum,t={active:!0,text:"请输入文本",type:"text",tag:"text_"+e,x:300,y:80,w:180,h:36,style:{textAlign:"left",lineHeight:"24px",fontSize:"24px",fontFamily:"微软黑体",fontWeight:400,color:"#687684",backgroundColor:"#9ac8d8",overflow:"hidden"}};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(t),this.updateActiveEle(t))},addImage:function(e){var t=++this.eleNum,a={active:e.active,type:"image",tag:"image_"+t,x:320,y:260,w:parseInt(e.width),h:parseInt(e.height),src:e.src,size:e.size};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(a),e.active&&this.updateActiveEle(a))},handleAddImage:function(e){var t=this,a=e.replace("data:image/jpeg;base64,","").length,i=parseInt(a-a/8*2),s=new Image;s.src=e,s.onload=function(){var a=Object(o["b"])(s.width,s.height,parseInt(212.5),parseInt(119.5));t.addImage({active:!0,src:e,size:i,width:a.width,height:a.height})}},updateActiveEle:function(e){this.activeEle=e},deleteActiveEle:function(){var e=this,t=this.elements.filter((function(t){return t.tag!==e.activeEle.tag}));this.$nextTick((function(){e.elements=t})),this.updateActiveEle({})}}},m=h,u=(a("f753"),a("9ca4")),v=Object(u["a"])(m,i,s,!1,null,null,null);t["default"]=v.exports},f753:function(e,t,a){"use strict";var i=a("b240"),s=a.n(i);s.a}}]);