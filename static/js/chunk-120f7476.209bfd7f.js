(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-120f7476"],{"0b79":function(t,e,n){"use strict";var i=n("8ccb"),a=n.n(i);a.a},"0d7a":function(t,e,n){"use strict";var i=n("b2a2"),a=n("8a1c"),r=n("857c"),s=n("2732"),o=n("ef4c"),l=n("38eb"),c=n("d88d"),u=n("59da"),h=n("5139"),f=n("efe2"),d=[].push,p=Math.min,v=4294967295,m=!f((function(){return!RegExp(v,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(s(this)),r=void 0===n?v:n>>>0;if(0===r)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,r);var o,l,c,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(o=h.call(m,i)){if(l=m.lastIndex,l>p&&(u.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&d.apply(u,o.slice(1)),c=o[0].length,p=l,u.length>=r))break;m.lastIndex===o.index&&m.lastIndex++}return p===i.length?!c&&m.test("")||u.push(""):u.push(i.slice(p)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=s(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,a,n):i.call(String(a),e,n)},function(t,a){var s=n(i,t,this,a,i!==e);if(s.done)return s.value;var h=r(t),f=String(this),d=o(h,RegExp),g=h.unicode,x=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),b=new d(m?h:"^(?:"+h.source+")",x),y=void 0===a?v:a>>>0;if(0===y)return[];if(0===f.length)return null===u(b,f)?[f]:[];var w=0,E=0,T=[];while(E<f.length){b.lastIndex=m?E:0;var S,z=u(b,m?f:f.slice(E));if(null===z||(S=p(c(b.lastIndex+(m?0:E)),f.length))===w)E=l(f,E,g);else{if(T.push(f.slice(w,E)),T.length===y)return T;for(var I=1;I<=z.length-1;I++)if(T.push(z[I]),T.length===y)return T;E=w=S}}return T.push(f.slice(w)),T}]}),!m)},"22ef":function(t,e,n){"use strict";var i=n("efe2");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"272e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VueDrr",{staticClass:"element-drr-wrapper",attrs:{x:t.element.x,y:t.element.y,w:t.element.w,h:t.element.h,handles:t.handles,active:t.element.active,minw:80,minh:18,parent:!0,rotatable:!1},on:{dragstop:t.handleDragStop,resizing:t.handleResizing,resizestop:t.handleResizeStop,deactivated:t.handleDeactivate,activated:t.handleActivated}},[t._t("default")],2)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-drr-container",class:{"z-draggable":t.draggable,"z-resizable":t.resizable,"z-rotatable":t.rotatable,"z-active":t.enabled,"z-dragging":t.dragging,"z-resizing":t.resizing,"z-rotating":t.rotating},style:t.style,on:{mousedown:t.elmDown}},[t.rotatable?n("div",{staticClass:"z-rotateable-handle",style:{display:t.enabled?"block":"none"},on:{touchstart:function(e){return e.preventDefault(),e.stopPropagation(),t.elmDown(e)},mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.rotating=!0},dblclick:t.fillParent}}):t._e(),t._l(t.handles,(function(e){return t.resizable?n("div",{key:e,staticClass:"z-resizeable-handle",class:"z-handle-"+e,style:{display:t.enabled?"block":"none"},on:{touchstart:function(n){return n.stopPropagation(),n.preventDefault(),t.handleDown(e,n)},mousedown:function(n){return n.stopPropagation(),n.preventDefault(),t.handleResizeStart(e,n)}}}):t._e()})),t._t("default")],2)},s=[];n("dbb3"),n("ecb4"),n("513c"),n("e18c"),n("84c2"),n("e35a"),n("1c2e"),n("34d9"),n("96db"),n("af86"),n("4194");function o(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)}function l(t,e,n){var i=t,a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((function(t){return o(i[t])}));if(!o(i[a]))return!1;do{if(i[a](e))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1}var c={name:"VueDrr",props:{active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},canDeactive:{type:Boolean,default:!0},w:{type:[Number],default:200},h:{type:[Number,String],default:28,validator:function(t){var e="string"===typeof t?"auto"===t:t>=0;return e}},ratio:{type:[Number,String]},contains:{type:Boolean,default:!1},minw:{type:Number,default:28,validator:function(t){return t>0}},minh:{type:Number,default:28,validator:function(t){return t>0}},angle:{type:Number,default:0,validator:function(t){return"number"===typeof t}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){var e="string"===typeof t?"auto"===t:t>=0;return e}},handles:{type:Array,default:function(){return["n","e","s","w","nw","ne","se","sw"]},validator:function(t){var e=new Set(["n","e","s","w","nw","ne","se","sw"]);return new Set(t.filter((function(t){return e.has(t)}))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:function(t){return-1!==["x","y","both"].indexOf(t)}},grid:{type:Array,default:function(){return[1,1]}},parent:{type:Boolean,default:!1},overflowY:{type:String,default:""}},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,rotateAngle:this.angle,resizing:!1,dragging:!1,rotating:!1,enabled:this.active,handle:null,zIndex:this.z,parentW:9999,parentH:9999,mouseX:0,mouseY:0,lastMouseX:0,lastMouseY:0,mouseOffX:0,mouseOffY:0,elmX:0,elmY:0,elmW:0,elmH:0}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",transform:"rotate("+this.rotateAngle+"deg)",zIndex:this.zIndex,overflowY:this.overflowY,overflowX:""}}},watch:{active:function(t){this.enabled=t},x:function(t){this.left=t,this.elmX=t},y:function(t){this.top=t,this.elmY=t},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)},w:function(t){this.width=t,this.elmW=t},h:function(t){this.height=t,this.elmH=t},angle:function(t){this.rotateAngle=t}},mounted:function(){var t=document.querySelector(".editor-mask")||document.documentElement;t.addEventListener("mousedown",this.deselect,!1),t.addEventListener("mousemove",this.handleMove,!1),t.addEventListener("mouseup",this.handleUp,!1),t.addEventListener("touchmove",this.handleMove,!1),t.addEventListener("touchend touchcancel",this.deselect,!1),t.addEventListener("touchstart",this.handleUp,!1),this.elmX=parseInt(this.$el.style.left),this.elmY=parseInt(this.$el.style.top),this.elmW=this.$el.offsetWidth||this.$el.clientWidth,this.elmH=this.$el.offsetHeight||this.$el.clientHeight,this.reviewDimensions()},beforeDestroy:function(){var t=document.querySelector(".editor-mask")||document.documentElement;t.removeEventListener("mousedown",this.deselect,!1),t.removeEventListener("mousemove",this.handleMove,!1),t.removeEventListener("mouseup",this.handleUp,!1),t.addEventListener("touchmove",this.handleMove,!1),t.addEventListener("touchend touchcancel",this.deselect,!1),t.addEventListener("touchstart",this.handleUp,!1)},methods:{reviewDimensions:function(){if(this.minw>this.w&&(this.width=this.minw),this.minh>this.h&&(this.height=this.minh),this.parent){var t=parseInt(this.$el.parentNode.clientWidth,10),e=parseInt(this.$el.parentNode.clientHeight,10);this.parentW=t,this.parentH=e,this.w>this.parentW&&(this.width=t),this.h>this.parentH&&(this.height=e),this.x+this.w>this.parentW&&(this.width=t-this.x),this.y+this.h>this.parentH&&(this.height=e-this.y),this.elmW=this.width,this.elmH=this.height}this.$emit("resizing",this.left,this.top,this.width,this.height)},elmDown:function(t){var e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.dragHandle&&!l(e,this.dragHandle,this.$el)||this.dragCancel&&l(e,this.dragCancel,this.$el))return;this.reviewDimensions(),this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0)}},deselect:function(t){-1!==t.type.indexOf("touch")?(this.mouseX=t.changedTouches[0].clientX,this.mouseY=t.changedTouches[0].clientY):(this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop),this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var e=t.target||t.srcElement,n=new RegExp("z-handle-([nesw]{1, 2})","");this.$el.contains(e)||n.test(e.className)||this.enabled&&this.canDeactive&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1))},handleResizeStart:function(t,e){this.handle=t,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.resizing=!0},handleDown:function(t,e){this.handle=t,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.resizing=!0},fillParent:function(t){var e=this;if(this.parent&&this.resizable&&this.maximize){var n=!1,i=function t(){n||window.requestAnimationFrame(t),"x"===e.axis?e.width===e.parentW&&0===e.left&&(n=!0):"y"===e.axis?e.height===e.parentH&&0===e.top&&(n=!0):"both"===e.axis&&e.width===e.parentW&&e.height===e.parentH&&0===e.top&&0===e.left&&(n=!0),"x"!==e.axis&&"both"!==e.axis||(e.width<e.parentW&&(e.width++,e.elmW++),e.left>0&&(e.left--,e.elmX--)),"y"!==e.axis&&"both"!==e.axis||(e.height<e.parentH&&(e.height++,e.elmH++),e.top>0&&(e.top--,e.elmY--)),e.$emit("resizing",e.left,e.top,e.width,e.height)};window.requestAnimationFrame(i)}},getOrigin:function(){var t=this.$el.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.bottom+t.top)/2}},handleMove:function(t){var e=this.lastMouseX,n=this.lastMouseY,i=-1!==t.type.indexOf("touchmove");this.mouseX=i?t.touches[0].clientX:t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=i?t.touches[0].clientY:t.pageY||t.clientY+document.documentElement.scrollTop;var a=this.mouseX-this.lastMouseX+this.mouseOffX,r=this.mouseY-this.lastMouseY+this.mouseOffY;this.mouseOffX=this.mouseOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var s=a,o=r;if(this.resizing)this.handle.indexOf("n")>=0&&(this.elmH-o<this.minh?this.mouseOffY=o-(r=this.elmH-this.minh):this.parent&&this.elmY+o<0&&(this.mouseOffY=o-(r=-this.elmY)),this.elmY+=r,this.elmH-=r),this.handle.indexOf("s")>=0&&(this.elmH+o<this.minh?this.mouseOffY=o-(r=this.minh-this.elmH):this.parent&&this.elmY+this.elmH+o>this.parentH&&(this.mouseOffY=o-(r=this.parentH-this.elmY-this.elmH)),this.elmH+=r),this.handle.indexOf("w")>=0&&(this.elmW-s<this.minw?this.mouseOffX=s-(a=this.elmW-this.minw):this.parent&&this.elmX+s<0&&(this.mouseOffX=s-(a=-this.elmX)),this.elmX+=a,this.elmW-=a),this.handle.indexOf("e")>=0&&(this.elmW+s<this.minw?this.mouseOffX=s-(a=this.minw-this.elmW):this.parent&&this.elmX+this.elmW+s>this.parentW&&(this.mouseOffX=s-(a=this.parentW-this.elmX-this.elmW)),this.elmW+=a),this.left=Math.round(this.elmX/this.grid[0])*this.grid[0],this.top=Math.round(this.elmY/this.grid[1])*this.grid[1],this.width=Math.round(this.elmW/this.grid[0])*this.grid[0],this.height=Math.round(this.elmH/this.grid[1])*this.grid[1],this.$emit("resizing",this.left,this.top,this.width,this.height);else if(this.dragging)this.parent&&(this.elmX+s<0?this.mouseOffX=s-(a=-this.elmX):this.elmX+this.elmW+s>this.parentW&&(this.mouseOffX=s-(a=this.parentW-this.elmX-this.elmW)),this.elmY+o<0?this.mouseOffY=o-(r=-this.elmY):this.elmY+this.elmH+o>this.parentH&&(this.mouseOffY=o-(r=this.parentH-this.elmY-this.elmH))),this.elmX+=a,this.elmY+=r,"x"!==this.axis&&"both"!==this.axis||(this.left=Math.round(this.elmX/this.grid[0])*this.grid[0]),"y"!==this.axis&&"both"!==this.axis||(this.top=Math.round(this.elmY/this.grid[1])*this.grid[1]),this.$emit("dragging",this.left,this.top);else if(this.rotating){var l=this.getOrigin(),c=Math.atan2(n-l.y,e-l.x),u=Math.atan2(this.mouseY-l.y,this.mouseX-l.x);this.rotateAngle+=Math.round(180*(u-c)/Math.PI),this.$emit("rotating",this.rotateAngle)}},handleUp:function(t){-1!==t.type.indexOf("touch")&&(this.lastMouseX=t.changedTouches[0].clientX,this.lastMouseY=t.changedTouches[0].clientY),this.handle=null,this.resizing&&(this.resizing=!1,this.$emit("resizestop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragstop",this.left,this.top)),this.rotating&&(this.rotating=!1,this.$emit("rotatestop",this.rotateAngle)),this.elmX=this.left,this.elmY=this.top}}},u=c,h=(n("cf9a"),n("9ca4")),f=Object(h["a"])(u,r,s,!1,null,"4a25297a",null),d=f.exports,p={name:"ElementDrr",components:{VueDrr:d},props:{element:{type:Object,default:function(){}},handles:{type:Array,default:function(){return["n","e","s","w","nw","ne","se","sw"]}}},watch:{element:{handler:function(t){var e=this;this.$nextTick((function(){e.updateHeight()}))},deep:!0}},methods:{updateHeight:function(){var t=this;if("text"===this.element.type){var e=this.$el;this.$nextTick((function(){var n=Math.ceil(e.parentNode.getBoundingClientRect().height),i=Math.ceil(e.querySelector(".image-rich-text").getBoundingClientRect().height);t.element.y+i>=n&&(t.element.y=n-i),e.style.height=i+"px",t.element.h=i}))}},handleDragStop:function(t,e){this.element.x===t&&this.element.y===e||(this.element.x=t,this.element.y=e)},handleResizing:function(){"text"===this.element.type&&this.updateHeight()},handleResizeStop:function(t,e,n,i){this.element.x===t&&this.element.y===e&&this.element.w===n&&this.element.h===i||(this.element.x=t,this.element.y=e,this.element.w=n,"text"===this.element.type?this.updateHeight():this.element.h=i)},handleDeactivate:function(){this.element.active=!1},handleActivated:function(){this.element.active=!0,this.$emit("updateActiveEle",this.element)}}},v=p,m=(n("c338"),Object(h["a"])(v,i,a,!1,null,null,null));e["a"]=m.exports},"2bbe":function(t,e,n){var i=n("1c8b"),a=n("c7e6");i({target:"String",proto:!0},{repeat:a})},"34d9":function(t,e,n){"use strict";var i=n("8216"),a=n("be57");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},"38eb":function(t,e,n){"use strict";var i=n("f62c").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},4194:function(t,e,n){"use strict";var i=n("1c8b"),a=n("5dfd").find,r=n("258f"),s=n("ff9c"),o="find",l=!0,c=s(o);o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},4762:function(t,e,n){"use strict";var i=n("e72c"),a=n.n(i);a.a},"4e87":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-rich-text",style:t.element.style,attrs:{spellcheck:"false",contenteditable:"true"},domProps:{innerHTML:t._s(t.innerText)},on:{focus:t.handleFocus,keydown:function(t){return t.stopPropagation()},keyup:function(e){return e.stopPropagation(),t.emitInput(e)},paste:function(e){return t.handlePaste(e)},click:function(t){t.stopPropagation()}}})},a=[],r=(n("e35a"),n("5e9f"),n("ed08")),s={name:"ImageRichText",props:{value:{type:String,default:"请输入文本"},element:{type:Object,default:function(){return{style:{}}}},activeEleText:{type:Object,default:function(){}}},data:function(){return{innerText:this.value.replace(/\n/g,"<br>")}},watch:{value:function(t){this.innerText=t}},methods:{emitInput:function(t){this.$emit("input",t.target.innerHTML),this.keepCursorLast(t)},handlePaste:function(t){this.$emit("input",Object(r["c"])(t)),this.keepCursorLast(t)},keepCursorLast:function(t){this.$nextTick((function(){Object(r["d"])(t.target)}))},handleFocus:function(){this.activeEleText.active=!0}}},o=s,l=(n("0b79"),n("9ca4")),c=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=c.exports},5139:function(t,e,n){"use strict";var i=n("99ad"),a=n("22ef"),r=RegExp.prototype.exec,s=String.prototype.replace,o=r,l=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],h=l||u||c;h&&(o=function(t){var e,n,a,o,h=this,f=c&&h.sticky,d=i.call(h),p=h.source,v=0,m=t;return f&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),m=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",d)),u&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(e=h.lastIndex),a=r.call(f?n:h,m),f?a?(a.input=a.input.slice(v),a[0]=a[0].slice(v),a.index=h.lastIndex,h.lastIndex+=a[0].length):h.lastIndex=0:l&&a&&(h.lastIndex=h.global?a.index+a[0].length:e),u&&a&&a.length>1&&s.call(a[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),t.exports=o},"513c":function(t,e,n){"use strict";var i=n("1e2c"),a=n("d890"),r=n("e8d6"),s=n("1944"),o=n("faa8"),l=n("2118"),c=n("7063"),u=n("9f67"),h=n("efe2"),f=n("6d60"),d=n("b338").f,p=n("aa6b").f,v=n("d910").f,m=n("c10f").trim,g="Number",x=a[g],b=x.prototype,y=l(f(b))==g,w=function(t){var e,n,i,a,r,s,o,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+c}for(r=c.slice(2),s=r.length,o=0;o<s;o++)if(l=r.charCodeAt(o),l<48||l>a)return NaN;return parseInt(r,i)}return+c};if(r(g,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var E,T=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof T&&(y?h((function(){b.valueOf.call(n)})):l(n)!=g)?c(new x(w(e)),n,T):w(e)},S=i?d(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),z=0;S.length>z;z++)o(x,E=S[z])&&!o(T,E)&&v(T,E,p(x,E));T.prototype=b,b.constructor=T,s(a,g,T)}},"59da":function(t,e,n){var i=n("2118"),a=n("5139");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"5e9f":function(t,e,n){"use strict";var i=n("b2a2"),a=n("857c"),r=n("3553"),s=n("d88d"),o=n("3da3"),l=n("2732"),c=n("38eb"),u=n("59da"),h=Math.max,f=Math.min,d=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=i.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(n,i){var a=l(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a,i):e.call(String(a),n,i)},function(t,i){if(!g&&x||"string"===typeof i&&-1===i.indexOf(b)){var r=n(e,t,this,i);if(r.done)return r.value}var l=a(t),d=String(this),p="function"===typeof i;p||(i=String(i));var v=l.global;if(v){var w=l.unicode;l.lastIndex=0}var E=[];while(1){var T=u(l,d);if(null===T)break;if(E.push(T),!v)break;var S=String(T[0]);""===S&&(l.lastIndex=c(d,s(l.lastIndex),w))}for(var z="",I=0,R=0;R<E.length;R++){T=E[R];for(var k=String(T[0]),O=h(f(o(T.index),d.length),0),A=[],$=1;$<T.length;$++)A.push(m(T[$]));var C=T.groups;if(p){var Y=[k].concat(A,O,d);void 0!==C&&Y.push(C);var D=String(i.apply(void 0,Y))}else D=y(k,d,O,A,C,i);O>=I&&(z+=d.slice(I,O)+D,I=O+k.length)}return z+d.slice(I)}];function y(t,n,i,a,s,o){var l=i+t.length,c=a.length,u=v;return void 0!==s&&(s=r(s),u=p),e.call(o,u,(function(e,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(l);case"<":o=s[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>c){var h=d(u/10);return 0===h?e:h<=c?void 0===a[h-1]?r.charAt(1):a[h-1]+r.charAt(1):e}o=a[u-1]}return void 0===o?"":o}))}}))},"64bf":function(t,e,n){var i=n("efe2");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},"6f7e":function(t,e,n){},8216:function(t,e,n){"use strict";var i=n("1c8b"),a=n("d890"),r=n("e8d6"),s=n("1944"),o=n("a83a"),l=n("262e"),c=n("c4e4"),u=n("a719"),h=n("efe2"),f=n("f471"),d=n("27b5"),p=n("7063");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),g=v?"set":"add",x=a[t],b=x&&x.prototype,y=x,w={},E=function(t){var e=b[t];s(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(r(t,"function"!=typeof x||!(m||b.forEach&&!h((function(){(new x).entries().next()})))))y=n.getConstructor(e,t,v,g),o.REQUIRED=!0;else if(r(t,!0)){var T=new y,S=T[g](m?{}:-0,1)!=T,z=h((function(){T.has(1)})),I=f((function(t){new x(t)})),R=!m&&h((function(){var t=new x,e=5;while(e--)t[g](e,e);return!t.has(-0)}));I||(y=e((function(e,n){c(e,y,t);var i=p(new x,e,y);return void 0!=n&&l(n,i[g],i,v),i})),y.prototype=b,b.constructor=y),(z||R)&&(E("delete"),E("has"),v&&E("get")),(R||S)&&E(g),m&&b.clear&&delete b.clear}return w[t]=y,i({global:!0,forced:y!=x},w),d(y,t),m||n.setStrong(y,t,v),y}},"84c2":function(t,e,n){var i=n("1e2c"),a=n("d890"),r=n("e8d6"),s=n("7063"),o=n("d910").f,l=n("b338").f,c=n("8a1c"),u=n("99ad"),h=n("22ef"),f=n("1944"),d=n("efe2"),p=n("b702").set,v=n("403f"),m=n("90fb"),g=m("match"),x=a.RegExp,b=x.prototype,y=/a/g,w=/a/g,E=new x(y)!==y,T=h.UNSUPPORTED_Y,S=i&&r("RegExp",!E||T||d((function(){return w[g]=!1,x(y)!=y||x(w)==w||"/a/i"!=x(y,"i")})));if(S){var z=function(t,e){var n,i=this instanceof z,a=c(t),r=void 0===e;if(!i&&a&&t.constructor===z&&r)return t;E?a&&!r&&(t=t.source):t instanceof z&&(r&&(e=u.call(t)),t=t.source),T&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var o=s(E?new x(t,e):x(t,e),i?this:b,z);return T&&n&&p(o,{sticky:n}),o},I=function(t){t in z||o(z,t,{configurable:!0,get:function(){return x[t]},set:function(e){x[t]=e}})},R=l(x),k=0;while(R.length>k)I(R[k++]);b.constructor=z,z.prototype=b,f(a,"RegExp",z)}v("RegExp")},"892b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-setting-wrapper"},[n("el-form",{attrs:{"label-width":"70px"}},[n("el-form-item",{attrs:{label:"文本"}},[n("ImageRichText",{staticClass:"text-editable",attrs:{"active-ele-text":t.activeEleText},model:{value:t.activeEleText.text,callback:function(e){t.$set(t.activeEleText,"text",e)},expression:"activeEleText.text"}})],1),n("el-form-item",{attrs:{label:"字体"}},[n("el-select",{attrs:{size:"small"},model:{value:t.activeEleText.style.fontFamily,callback:function(e){t.$set(t.activeEleText.style,"fontFamily",e)},expression:"activeEleText.style.fontFamily"}},t._l(t.fontFamilyData,(function(t){return n("el-option",{key:t.value,style:{fontFamily:t.value},attrs:{label:t.value,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"字号"}},[n("el-select",{attrs:{size:"small"},model:{value:t.activeEleText.style.fontSize,callback:function(e){t.$set(t.activeEleText.style,"fontSize",e)},expression:"activeEleText.style.fontSize"}},t._l(t.fontSizeData,(function(t){return n("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"颜色"}},[n("div",{staticClass:"color-box"},[n("i",{staticClass:"vue-dsn-icon-wenzise color-icon",style:{color:t.activeEleText.style.color}}),n("el-color-picker",{model:{value:t.activeEleText.style.color,callback:function(e){t.$set(t.activeEleText.style,"color",e)},expression:"activeEleText.style.color"}})],1),n("div",{staticClass:"color-box"},[n("i",{staticClass:"vue-dsn-icon-beijingse color-icon icon-bg",style:{color:t.activeEleText.style.backgroundColor}}),n("el-color-picker",{model:{value:t.activeEleText.style.backgroundColor,callback:function(e){t.$set(t.activeEleText.style,"backgroundColor",e)},expression:"activeEleText.style.backgroundColor"}})],1),n("div",{staticClass:"style-box"},[n("span",{class:["style-item",t.fontWeight?"active":""],on:{click:t.setFontWeight}},[n("i",{staticClass:"vue-dsn-icon-jiacu style-icon"})]),n("div",{staticClass:"style-item"},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[n("i",{staticClass:"vue-dsn-icon-duiqi style-icon"}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{style:t.setAlignActive("left"),attrs:{command:"left"}},[t._v("左对齐")]),n("el-dropdown-item",{style:t.setAlignActive("center"),attrs:{command:"center"}},[t._v("居中")]),n("el-dropdown-item",{style:t.setAlignActive("right"),attrs:{command:"right"}},[t._v("右对齐")])],1)],1)],1)])]),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.downloadImage}},[t._v("文本生成图片")])],1)],1)],1)},a=[],r=(n("e18c"),n("e35a"),n("96db"),n("0d7a"),n("af86"),n("f1a9"),n("ed08")),s=n("4e87"),o=[{value:"黑体"},{value:"宋体"},{value:"仿宋"},{value:"楷体"},{value:"隶书"},{value:"微软雅黑"},{value:"方正姚体"}],l=[{value:"12px"},{value:"14px"},{value:"16px"},{value:"18px"},{value:"24px"},{value:"32px"},{value:"48px"}],c={name:"TextSetting",components:{ImageRichText:s["a"]},props:{activeEleText:{type:Object,default:function(){}}},data:function(){return{fontFamilyData:o,fontSizeData:l}},computed:{fontWeight:function(){return 400!==+this.activeEleText.style.fontWeight}},watch:{activeEleText:{handler:function(t){this.activeEleText.style.lineHeight=t.style.fontSize},deep:!0}},methods:{setFontWeight:function(){400===+this.activeEleText.style.fontWeight?this.activeEleText.style.fontWeight=600:this.activeEleText.style.fontWeight=400},handleCommand:function(t){this.activeEleText.style.textAlign=t},setAlignActive:function(t){return this.activeEleText.style.textAlign===t?{backgroundColor:"#409eff",color:"#fff"}:{backgroundColor:"",color:"#333"}},textBecomeImg:function(t){var e=document.createElement("canvas");e.width=t.w,e.height=t.h;var n=e.getContext("2d"),i=4,a=8;n.fillStyle=t.style.backgroundColor||"transparent",n.fillRect(0,0,e.width,e.height),n.fillStyle=t.style.color,n.font=t.style.fontWeight+" "+t.style.fontSize+" "+t.style.fontFamily,n.textBaseline="top",n.textAlign=t.style.textAlign;for(var r,s=t.text.split(""),o="",l=[],c=e.width-2*a,u=0;u<s.length;u++)n.measureText(o).width<c&&n.measureText(o+s[u]).width<=c?o+=s[u]:(l.push(o),o=s[u]);l.push(o),"left"===n.textAlign?r=a:"center"===n.textAlign?r=c/2:"right"===n.textAlign&&(r=c);for(var h=0;h<l.length;h++)n.fillText(l[h],r,parseInt(t.style.fontSize)*h+i,c);return e.toDataURL("image/png")},downloadImage:function(){var t=this.textBecomeImg(this.activeEleText),e=Object(r["a"])(t),n=document.createElement("a"),i=document.createEvent("HTMLEvents");i.initEvent("click",!0,!0),n.download="image.png",n.href=URL.createObjectURL(e),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}},u=c,h=(n("4762"),n("9ca4")),f=Object(h["a"])(u,i,a,!1,null,null,null);e["a"]=f.exports},"8a1c":function(t,e,n){var i=n("a719"),a=n("2118"),r=n("90fb"),s=r("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==a(t))}},"8ccb":function(t,e,n){},9302:function(t,e,n){"use strict";var i=n("1c8b"),a=n("692f"),r=n("da10"),s=n("d7e1"),o=[].join,l=a!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(r(this),void 0===t?",":t)}})},a83a:function(t,e,n){var i=n("d5a8"),a=n("a719"),r=n("faa8"),s=n("d910").f,o=n("7e8b"),l=n("64bf"),c=o("meta"),u=0,h=Object.isExtensible||function(){return!0},f=function(t){s(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},d=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},p=function(t,e){if(!r(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},v=function(t){return l&&m.REQUIRED&&h(t)&&!r(t,c)&&f(t),t},m=t.exports={REQUIRED:!1,fastKey:d,getWeakData:p,onFreeze:v};i[c]=!0},b2a2:function(t,e,n){"use strict";n("e35a");var i=n("1944"),a=n("efe2"),r=n("90fb"),s=n("5139"),o=n("0fc1"),l=r("species"),c=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),h=r("replace"),f=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),d=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var p=r(t),v=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=v&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!v||!m||"replace"===t&&(!c||!u||f)||"split"===t&&!d){var g=/./[p],x=n(p,""[t],(function(t,e,n,i,a){return e.exec===s?v&&!a?{done:!0,value:g.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=x[0],y=x[1];i(String.prototype,t,b),i(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}h&&o(RegExp.prototype[p],"sham",!0)}},be57:function(t,e,n){"use strict";var i=n("d910").f,a=n("6d60"),r=n("99ab"),s=n("e349"),o=n("c4e4"),l=n("262e"),c=n("99ee"),u=n("403f"),h=n("1e2c"),f=n("a83a").fastKey,d=n("b702"),p=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,i){o(t,u,e),p(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=i&&l(i,t[c],t,n)})),d=v(e),m=function(t,e,n){var i,a,r=d(t),s=g(t,e);return s?s.value=n:(r.last=s={index:a=f(e,!0),key:e,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=s),i&&(i.next=s),h?r.size++:t.size++,"F"!==a&&(r.index[a]=s)),t},g=function(t,e){var n,i=d(t),a=f(e);if("F"!==a)return i.index[a];for(n=i.first;n;n=n.next)if(n.key==e)return n};return r(u.prototype,{clear:function(){var t=this,e=d(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),i=g(e,t);if(i){var a=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=a),a&&(a.previous=r),n.first==i&&(n.first=a),n.last==i&&(n.last=r),h?n.size--:e.size--}return!!i},forEach:function(t){var e,n=d(this),i=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),r(u.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),h&&i(u.prototype,"size",{get:function(){return d(this).size}}),u},setStrong:function(t,e,n){var i=e+" Iterator",a=v(e),r=v(i);c(t,e,(function(t,e){p(this,{type:i,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},c10f:function(t,e,n){var i=n("2732"),a=n("fc8c"),r="["+a+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),l=function(t){return function(e){var n=String(i(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},c338:function(t,e,n){"use strict";var i=n("d145"),a=n.n(i);a.a},c7e6:function(t,e,n){"use strict";var i=n("3da3"),a=n("2732");t.exports="".repeat||function(t){var e=String(a(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},cf9a:function(t,e,n){"use strict";var i=n("6f7e"),a=n.n(i);a.a},d145:function(t,e,n){},e35a:function(t,e,n){"use strict";var i=n("1c8b"),a=n("5139");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},e72c:function(t,e,n){},ed08:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));n("9302"),n("2eeb"),n("e18c"),n("e35a"),n("2bbe"),n("5e9f"),n("0d7a"),n("8256"),n("ab6e"),n("927c"),n("3c51"),n("db0a"),n("1cc1"),n("ab0f"),n("fc6e"),n("f30b"),n("cfd1"),n("d104"),n("f74a"),n("3598"),n("b497"),n("2909"),n("a7ef"),n("b523"),n("e671"),n("4140"),n("83db"),n("829d"),n("939f"),n("1bb1"),n("c3ba");function i(t){function e(t){var e=a(t).replace(/</g,"&lt;").replace(/>/g,"&gt;"),n=e.split(/\r\n|\r|\n/);return n?n.map((function(t){return t.length>0?"<div>"+t+"</div>":"<div><br></div>"})).join(""):e}var n="",i=" ".repeat(2);if(t.preventDefault(),t.clipboardData)n=(t.originalEvent||t).clipboardData.getData("text/plain").replace(/\t/g,i),document.execCommand("insertHtml",!1,e(n));else if(window.clipboardData)if(n=window.clipboardData.getData("Text").replace(/\t/g,i),document.selection)document.selection.createRange().pasteHTML(e(n));else if(window.getSelection){var r=window.getSelection(),s=r.getRangeAt(0),o=document.createElement("span");o.innerHTML="&#FEFF;",s.deleteContents(),s.insertNode(o);var l=document.body.createTextRange();l.moveToElementText(o),o.parentNode.removeChild(o),l.pasteHTML(e(n)),l.collapse(!1),l.select()}return e(n)}function a(t){return t.replace(/<(\/?)p>/g,"<$1div>")}function r(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(t),n.collapse(!1),n.select()}}function s(t){for(var e=window.atob(t.split(",")[1]),n=[],i=0;i<e.length;i++)n.push(e.charCodeAt(i));return new Blob([new Uint8Array(n)],{type:"image/png"})}function o(t,e,n,i){var a=0,r=0,s=0;if(t>e)if(t>=n){var o=e*(n/t);o>=n?(a=t*(i/e),r=i,s=e/i):(a=n,r=o,s=t/n)}else a=t,r=e,s=1;else e>=i?(a=t*(i/e),r=i,s=e/i):(a=t,r=e,s=1);return{width:a,height:r,ratio:s}}},fc8c:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);