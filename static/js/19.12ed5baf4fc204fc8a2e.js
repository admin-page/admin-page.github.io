webpackJsonp([19],{"3t0w":function(t,e){},d3eS:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("LacG"),s=i("yWvC"),n=i("0xDb"),l=[{label:100,value:1},{label:90,value:.9},{label:80,value:.8},{label:70,value:.7},{label:60,value:.6},{label:50,value:.5}],h={name:"ImageCompress",data:function(){return{image:{width:1920,height:1080,src:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img03.jpg"},imageShow:{width:0,height:0,imgSrc:""},imageObj:{width:0,height:0,ratio:"100%",quality:1},qualityOptions:l}},computed:{imageStyle:function(){return{width:this.imageShow.width+"px",height:this.imageShow.height+"px",backgroundImage:"url('"+this.imageShow.imgSrc+"')"}},imageRatio:function(){return this.image.width/this.image.height}},components:{Hints:a.a,UploadImage:s.a},created:function(){this.getDragContainerSize(this.image.width,this.image.height),this.imageShow.imgSrc=this.image.src,this.imageObj.width=this.image.width,this.imageObj.height=this.image.height},watch:{image:{handler:function(t){this.getDragContainerSize(t.width,t.height),this.imageShow.imgSrc=t.src,this.imageObj.width=t.width,this.imageObj.height=t.height,this.imageObj.ratio="100%",this.imageObj.quality=1},deep:!0}},methods:{bindInput:function(t){"h"===t?this.imageObj.height=Math.round(this.imageObj.width/this.imageRatio).toFixed(0):"w"===t&&(this.imageObj.width=Math.round(this.imageObj.height*this.imageRatio).toFixed(0)),this.imageObj.ratio=(this.imageObj.width/this.image.width*100).toFixed(2)+"%"},getDragContainerSize:function(t,e){var i=Object(n.b)(t,e,850,550);this.imageShow.width=i.width,this.imageShow.height=i.height},handleSuccess:function(t){var e=this;this.image.src=t;var i=new Image;i.src=t,i.onload=function(){e.image.width=i.width,e.image.height=i.height}},compressImage:function(){var t=this,e=this.imageObj.width,i=this.imageObj.height,a=this.imageObj.quality,s=new Image;s.src=this.image.src,s.onload=function(){var n=document.createElement("canvas"),l=n.getContext("2d"),h=document.createAttribute("width");h.nodeValue=e;var o=document.createAttribute("height");o.nodeValue=i,n.setAttributeNode(h),n.setAttributeNode(o),l.fillRect(0,0,e,i),l.drawImage(s,0,0,e,i);var r=n.toDataURL("image/png",a);t.downloadImage(r)}},downloadImage:function(t){var e=Object(n.a)(t),i=document.createElement("a");document.createEvent("HTMLEvents").initEvent("click",!0,!0),i.download="image.png",i.href=URL.createObjectURL(e),i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-compress"},[i("Hints",[i("template",{slot:"hintName"},[t._v("图片压缩")]),t._v(" "),i("template",{slot:"hintInfo"},[i("p",[t._v("纯JS实现对图片的等比压缩和放大的功能，并对图片进行下载")])])],2),t._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("el-card",{attrs:{shadow:"always"}},[i("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("图片区域")]),t._v(" "),i("div",{staticClass:"box-wrapper"},[i("div",{staticClass:"image-container",style:t.imageStyle})])])],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-card",{attrs:{shadow:"always"}},[i("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("设置区域")]),t._v(" "),i("div",{staticClass:"box-content"},[i("el-form",{attrs:{"label-width":"82px","label-position":"left"}},[i("el-form-item",{attrs:{label:"选择图片："}},[i("UploadImage",{staticClass:"select-image",attrs:{btnName:"选择图片"},on:{"on-success":t.handleSuccess}})],1),t._v(" "),i("el-form-item",{attrs:{label:"图片尺寸："}},[i("div",{staticClass:"ratio-size"},[i("el-input",{nativeOn:{keyup:function(e){return t.bindInput("h")}},model:{value:t.imageObj.width,callback:function(e){t.$set(t.imageObj,"width",t._n(e))},expression:"imageObj.width"}}),t._v(" "),i("i",{staticClass:"vue-dsn-icon-edit-img-size-locking icon-link"}),t._v(" "),i("el-input",{nativeOn:{keyup:function(e){return t.bindInput("w")}},model:{value:t.imageObj.height,callback:function(e){t.$set(t.imageObj,"height",t._n(e))},expression:"imageObj.height"}}),t._v(" "),i("ul",{staticClass:"ratio-type clearfix"},[i("li",[t._v("宽")]),t._v(" "),i("li",[t._v("高")])])],1)]),t._v(" "),i("el-form-item",{staticClass:"item-ratio",attrs:{label:"压缩比例："}},[i("el-input",{attrs:{disabled:""},model:{value:t.imageObj.ratio,callback:function(e){t.$set(t.imageObj,"ratio",t._n(e))},expression:"imageObj.ratio"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"图片质量："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.imageObj.quality,callback:function(e){t.$set(t.imageObj,"quality",e)},expression:"imageObj.quality"}},t._l(t.qualityOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",[i("el-button",{staticClass:"btn-compress",attrs:{type:"primary"},on:{click:t.compressImage}},[t._v("压缩图片")])],1)],1)],1)])],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(h,o,!1,function(t){i("3t0w")},null,null);e.default=r.exports}});
//# sourceMappingURL=19.12ed5baf4fc204fc8a2e.js.map